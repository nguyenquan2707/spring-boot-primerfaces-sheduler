<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                template="layouts/standard.xhtml"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:sec="http://www.springframework.org/security/tags">

    <ui:define name="notes">
        <!--
        notes here
        -->
        <p:spacer style="border-color: red;background-color: darkseagreen" width="100" height="10"/>
        <sec:authorize access="hasRole('ROLE_USER')">
            <p:outputLabel value="USER role is on "/>
        </sec:authorize>
        <p:spacer style="border-color: blue;background-color: aquamarine" width="100" height="10"/>
        <sec:authorize access="hasRole('ROLE_ADMIN')">
            <p:outputLabel value=" ADMIN role is on"/>
        </sec:authorize>
    </ui:define>
    <!--
    content
    -->
    <ui:define name="content">
        <p:growl id="msgs" showDetail="true" skipDetailIfEqualsSummary="true"/>
        <p:fieldset legend="Valid username and passwords:"
                    style="width: 340px; border-color:#9cac7c;margin-bottom:40px;margin-left: 40%;margin-top: 20%; alignment: center">
            <p:panelGrid columns="1" cellpadding="5" style="border: #174d87;alignment: center">
                <p:outputLabel>user / aaa</p:outputLabel>
                <p:outputLabel>admin / aaa</p:outputLabel>
            </p:panelGrid>
        </p:fieldset>

        <div class="span-10 append-2 last">
            <c:if test="${not empty param.login_error}">
                <div class="error">
                    Your login attempt was not successful, try again.
                </div>
            </c:if>
            <!--
                        Auth. dialog
            -->
            <h:form name="f" style="width: 370px; border:#b4d100 ;margin-top:2%;margin-left: 40%;">
                <p:outputLabel value="Login failed!" rendered="${!empty param['error']}"/>
                <p:fieldset legend="Login" style="border-color: blue">
                    <p:dialog widgetVar="loginDialog"
                              position="center,center"
                              resizable="false"
                              showEffect="fade"
                              hideEffect="explode"
                              modal="false">
                        <h:panelGrid columns="2" cellpadding="5" header="Login">
                            <h:outputLabel for="usernameId" value="Username:"/>
                            <p:inputText id="usernameId" value="#{userView.userName}" required="true" placeholder="Username" label="Username"/>
                            <h:outputLabel for="passwordId" value="Password:"/>
                            <p:password id="passwordId" value="#{userView.password}" required="true" placeholder="Password" label="Password"/>
                        </h:panelGrid>
                    </p:dialog>
                    <!--
                                check box
                    -->
                    <p:selectBooleanCheckbox value="#{authBean.BRememberMe}" itemLabel="Don't ask for my password for 7 days:">
                        <p:ajax listener="#{authBean.BRememberMe}"/>
                    </p:selectBooleanCheckbox>
                    <div>
                        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                    </div>
                    <br/>
                    <br/>
                    <p:commandButton value="Login to Scheduler"
                                     id="loginAction"
                                     type="push"
                                     action="/login"
                                     style="margin-right:20px"
                                     icon="ui-icon-check"
                                     iconPos="left"
                                     title="Login to Scheduler"
                    />
                    <br/>
                </p:fieldset>
            </h:form>
        </div>
    </ui:define>
</ui:composition>