<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                template="layouts/standard.xhtml"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:sec="http://www.springframework.org/security/tags">

    <ui:define name="notes">
        <!--
        notes here
        -->
        <p:dialog>
            <sec:authorize access="hasRole('ROLE_USER')">
                <p:outputLabel value="USER role is on "/>
            </sec:authorize>
        </p:dialog>
        <p:dialog>
            <sec:authorize access="hasRole('ROLE_ADMIN')">
                <p:outputLabel value=" ADMIN role is on"/>
            </sec:authorize>
        </p:dialog>
    </ui:define>
    <!--
    content
    -->
    <ui:define name="content">
        <p:growl id="msgs" showDetail="true" skipDetailIfEqualsSummary="true"/>
        <p:fieldset legend="Valid username and passwords:"
                    style="width: 370px; border-color:#9cac7c;margin-bottom:40px;margin-left: 40%;margin-top: 20%; alignment: center">
            <p:panelGrid columns="1" cellpadding="5" style="border: #174d87;alignment: center">
                <p:outputLabel>user / aaa</p:outputLabel>
                <p:outputLabel>admin / aaa</p:outputLabel>
            </p:panelGrid>
        </p:fieldset>

        <div class="span-10 append-2 last">
            <c:if test="${not empty param.login_error}">
                <div class="error">
                    Your login attempt was not successful, try again.
                </div>
            </c:if>
            <!--
                        Auth. dialog
            -->
            <form name="f" action="${request.contextPath}/ui/loginProcess" method="post"
                  style="width: 400px; border:#b4d100 ;margin-top:2%;margin-left: 40%;">
                <fieldset title="Login">
                    <p:dialog widgetVar="loginDialog"
                              position="center,center"
                              resizable="false"
                              showEffect="fade"
                              hideEffect="explode"
                              modal="false">
                        <h:panelGrid columns="2" cellpadding="5" header="Login">
                            <h:outputLabel for="username" value="Username:"/>
                            <p:inputText id="username" value="#{user.username}" required="true" placeholder="user" label="username"/>
                            <h:outputLabel for="password" value="Password:"/>
                            <p:password id="password" value="#{user.password}" required="true" placeholder="aaa" label="password"/>
                        </h:panelGrid>
                    </p:dialog>
                    <!--
                                check box
                    -->
                    <p>
                        <label>
                            <input type="checkbox" name="_spring_security_remember_me"/>
                        </label>
                        Don't ask for my password for 7 days:
                    </p>
                    <div>
                        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                    </div>
                    <p>
                        <input name="submit" type="submit" value="Login"/>
                    </p>
                    <!--
                                login button
                    -->
                    <f:facet name="footer">
                        <p:commandButton value="Login" styleClass="ui-widget" action="#{userLoginView.login}"
                                         oncomplete="handleLoginRequest(xhr, status, args)"/>
                    </f:facet>
                </fieldset>
            </form>
        </div>
    </ui:define>
</ui:composition>